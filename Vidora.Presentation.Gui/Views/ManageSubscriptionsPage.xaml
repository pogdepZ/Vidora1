<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Vidora.Presentation.Gui.Views.ManageSubscriptionsPage"
    x:Name="PageRoot"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:Vidora.Presentation.Gui.Views"
    xmlns:viewModels="using:Vidora.Presentation.Gui.ViewModels"
    mc:Ignorable="d">

    <Grid Background="Transparent" Margin="0,20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ===== INFOBAR THÔNG BÁO ===== -->
        <InfoBar x:Name="NotificationInfoBar"
                 Grid.Row="0"
                 Grid.RowSpan="2"
                 VerticalAlignment="Top"
                 HorizontalAlignment="Center"
                 Margin="0,10,0,0"
                 Canvas.ZIndex="999"
                 IsOpen="{x:Bind ViewModel.IsInfoOpen, Mode=OneWay}"
                 IsClosable="True"
                 Severity="{x:Bind ViewModel.InfoSeverity, Mode=OneWay}"
                 Message="{x:Bind ViewModel.InfoMessage, Mode=OneWay}"
                 Width="600"/>

        <!-- ===== HEADER ===== -->
        <Grid Grid.Row="0" Padding="40,30,40,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Spacing="6">
                <TextBlock Text="Manage Subscriptions, Promos &amp; Orders"
                           FontSize="30"
                           FontWeight="SemiBold"/>
                <TextBlock Foreground="Gray" FontSize="14">
                    <Run Text="Plans: "/>
                    <Run Text="{x:Bind ViewModel.PlansCountText, Mode=OneWay}" FontWeight="SemiBold"/>
                    <Run Text=" | Promos: "/>
                    <Run Text="{x:Bind ViewModel.PromosTotalText, Mode=OneWay}" FontWeight="SemiBold"/>
                    <Run Text=" | Orders: "/>
                    <Run Text="{x:Bind ViewModel.OrdersTotalText, Mode=OneWay}" FontWeight="SemiBold"/>
                </TextBlock>
            </StackPanel>

            <Button Grid.Column="1"
                    Style="{StaticResource AccentButtonStyle}"
                    Command="{x:Bind ViewModel.ShowAddPromoDialogCommand}"
                    CommandParameter="{x:Bind AddPromoDialog}"
                    VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon Glyph="&#xE710;" FontSize="14"/>
                    <TextBlock Text="Add Promo Code"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- ===== CONTENT ===== -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20" Padding="40,0,40,40">

                <!-- ===================== PLANS ===================== -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="12"
                        BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        Padding="24">
                    <StackPanel Spacing="16">

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Subscription Plans" FontSize="20" FontWeight="SemiBold"/>
                                <TextBlock Text="List of available subscription plans" Foreground="Gray" FontSize="13"/>
                            </StackPanel>

                            <Button Grid.Column="1"
                                    Command="{x:Bind ViewModel.RefreshPlansCommand}"
                                    ToolTipService.ToolTip="Refresh">
                                <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                            </Button>
                        </Grid>

                        <Grid HorizontalAlignment="Center">
                            <ProgressRing IsActive="{x:Bind ViewModel.IsLoadingPlans, Mode=OneWay}"
                                          Visibility="{x:Bind ViewModel.IsLoadingPlans, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>

                            <ItemsControl ItemsSource="{x:Bind ViewModel.Plans, Mode=OneWay}"
                                          Visibility="{x:Bind ViewModel.IsLoadingPlans, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverterInvert}}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal" Spacing="16"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="viewModels:SubscriptionPlanVm">
                                        <Border Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                                CornerRadius="8"
                                                Padding="20"
                                                MinWidth="250"
                                                BorderBrush="{ThemeResource SystemAccentColorLight2}"
                                                BorderThickness="1">
                                            <StackPanel Spacing="10">
                                                <TextBlock Text="{x:Bind Name}"
                                                           FontSize="18"
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{x:Bind PriceDisplay}"
                                                           FontSize="24"
                                                           FontWeight="Bold"
                                                           Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{x:Bind DurationDisplay}"
                                                           FontSize="14"
                                                           Foreground="Gray"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{x:Bind Description}"
                                                           FontSize="12"
                                                           Foreground="Gray"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center"
                                                           MaxWidth="180"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Grid>

                    </StackPanel>
                </Border>

                <!-- ===================== ORDERS ===================== -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="12"
                        BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="48"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Grid Grid.Row="0" Padding="24,24,24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Orders" FontSize="20" FontWeight="SemiBold"/>
                                <TextBlock Text="Search by params: page, limit, search, status, planId" Foreground="Gray" FontSize="13"/>
                            </StackPanel>

                            <Button Grid.Column="1"
                                    Command="{x:Bind ViewModel.RefreshOrdersCommand}"
                                    ToolTipService.ToolTip="Refresh">
                                <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                            </Button>
                        </Grid>

                        <!-- Filters -->
                        <Grid Grid.Row="1" Padding="24,0,24,16" ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0"
                                     x:Name="OrderSearchTextBox"
                                     PlaceholderText="Search name/email/plan..."
                                     Text="{x:Bind ViewModel.OrderSearchText, Mode=TwoWay}"
                                     KeyDown="{x:Bind ViewModel.OnOrderSearchKeyDown}"/>

                            <ComboBox Grid.Column="1"
                                      x:Name="OrderStatusComboBox"
                                      Header="Status"
                                      MinWidth="160"
                                      ItemsSource="{x:Bind ViewModel.OrderStatusOptions, Mode=OneWay}"
                                      DisplayMemberPath="Label"
                                      SelectedValuePath="Value"
                                      SelectedValue="{x:Bind ViewModel.OrderStatusFilter, Mode=TwoWay}"
                                      SelectionChanged="{x:Bind ViewModel.OnOrderFilterChanged}"/>

                            <ComboBox Grid.Column="2"
                                      x:Name="OrderPlanComboBox"
                                      Header="Plan"
                                      MinWidth="160"
                                      ItemsSource="{x:Bind ViewModel.OrderPlanOptions, Mode=OneWay}"
                                      DisplayMemberPath="Label"
                                      SelectedValuePath="Value"
                                      SelectedValue="{x:Bind ViewModel.OrderPlanFilter, Mode=TwoWay}"
                                      SelectionChanged="{x:Bind ViewModel.OnOrderFilterChanged}"/>

                            <Button Grid.Column="3"
                                    Margin="0,20,0,0"
                                    Command="{x:Bind ViewModel.ClearOrderFiltersCommand}"
                                    ToolTipService.ToolTip="Clear Filters">
                                <FontIcon Glyph="&#xE711;" FontSize="12"/>
                            </Button>
                        </Grid>

                        <!-- Table header -->
                        <Grid Grid.Row="2"
                              Padding="24,10"
                              BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                              BorderThickness="0,1,0,1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1.2*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="1.2*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="ORDER" FontWeight="Bold" Foreground="Gray"/>
                            <TextBlock Grid.Column="1" Text="CUSTOMER" FontWeight="Bold" Foreground="Gray"/>
                            <TextBlock Grid.Column="2" Text="PLAN" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="3" Text="AMOUNT" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="4" Text="STATUS" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="5" Text="PAID DATE" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                        </Grid>

                        <!-- List -->
                        <Grid Grid.Row="3" MinHeight="200">
                            <ProgressRing IsActive="{x:Bind ViewModel.IsLoadingOrders, Mode=OneWay}"
                                          Visibility="{x:Bind ViewModel.IsLoadingOrders, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>

                            <ListView ItemsSource="{x:Bind ViewModel.Orders, Mode=OneWay}"
                                      SelectionMode="None"
                                      Padding="0"
                                      Visibility="{x:Bind ViewModel.IsLoadingOrders, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverterInvert}}">
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListView.ItemContainerStyle>

                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="viewModels:OrderVm">
                                        <Grid Padding="24,14"
                                              BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                                              BorderThickness="0,0,0,1">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="1.2*"/>
                                                <ColumnDefinition Width="2*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="1.2*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- OrderCode + OrderType -->
                                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                <TextBlock Text="{x:Bind OrderCode}" FontWeight="SemiBold"/>
                                                <TextBlock Text="{x:Bind OrderType}" Foreground="Gray" FontSize="11"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{x:Bind FullName}" FontWeight="SemiBold"/>
                                                <TextBlock Text="{x:Bind Email}" Foreground="Gray" FontSize="11"/>
                                            </StackPanel>

                                            <TextBlock Grid.Column="2" Text="{x:Bind PlanName}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="12"/>

                                            <TextBlock Grid.Column="3" Text="{x:Bind FinalAmountDisplay}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                                       FontWeight="SemiBold"/>

                                            <TextBlock Grid.Column="4" Text="{x:Bind Status}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="12"/>

                                            <TextBlock Grid.Column="5" Text="{x:Bind PaidAtDisplay}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Foreground="Gray" FontSize="11"/>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>

                        <!-- Pagination -->
                        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12" Padding="24">
                            <Button Content="◀" Command="{x:Bind ViewModel.OrderPrevCommand}" IsEnabled="{x:Bind ViewModel.OrderCanPrev, Mode=OneWay}"/>
                            <TextBlock VerticalAlignment="Center">
                                <Run Text="Page "/>
                                <Run Text="{x:Bind ViewModel.OrderPageText, Mode=OneWay}" FontWeight="Bold"/>
                            </TextBlock>
                            <Button Content="▶" Command="{x:Bind ViewModel.OrderNextCommand}" IsEnabled="{x:Bind ViewModel.OrderCanNext, Mode=OneWay}"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ===================== PROMOS ===================== -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="12"
                        BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="48"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Grid Grid.Row="0" Padding="24,24,24,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Promo Codes" FontSize="20" FontWeight="SemiBold"/>
                                <TextBlock Text="Search by params: page, limit, search, discountType, active" Foreground="Gray" FontSize="13"/>
                            </StackPanel>

                            <Button Grid.Column="1"
                                    Command="{x:Bind ViewModel.RefreshPromosCommand}"
                                    ToolTipService.ToolTip="Refresh">
                                <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                            </Button>
                        </Grid>

                        <!-- Filters -->
                        <Grid Grid.Row="1" Padding="24,0,24,16" ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0"
                                     x:Name="PromoSearchTextBox"
                                     PlaceholderText="Search code..."
                                     Text="{x:Bind ViewModel.PromoSearchText, Mode=TwoWay}"
                                     KeyDown="{x:Bind ViewModel.OnPromoSearchKeyDown}"/>

                            <ComboBox Grid.Column="1"
                                      x:Name="PromoTypeFilterComboBox"
                                      Header="Type"
                                      MinWidth="160"
                                      ItemsSource="{x:Bind ViewModel.PromoTypeOptions, Mode=OneWay}"
                                      DisplayMemberPath="Label"
                                      SelectedValuePath="Value"
                                      SelectedValue="{x:Bind ViewModel.PromoTypeFilter, Mode=TwoWay}"
                                      SelectionChanged="{x:Bind ViewModel.OnPromoFilterChanged}"/>

                            <ComboBox Grid.Column="2"
                                      x:Name="PromoActiveFilterComboBox"
                                      Header="Active"
                                      MinWidth="140"
                                      ItemsSource="{x:Bind ViewModel.PromoActiveOptions, Mode=OneWay}"
                                      DisplayMemberPath="Label"
                                      SelectedValuePath="Value"
                                      SelectedValue="{x:Bind ViewModel.PromoActiveFilter, Mode=TwoWay}"
                                      SelectionChanged="{x:Bind ViewModel.OnPromoFilterChanged}"/>

                            <Button Grid.Column="3"
                                    Margin="0,20,0,0"
                                    Command="{x:Bind ViewModel.ClearPromoFiltersCommand}"
                                    ToolTipService.ToolTip="Clear Filters">
                                <FontIcon Glyph="&#xE711;" FontSize="12"/>
                            </Button>
                        </Grid>

                        <!-- Table header -->
                        <Grid Grid.Row="2"
                              Padding="24,10"
                              BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                              BorderThickness="0,1,0,1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1.5*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="1.6*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="CODE" FontWeight="Bold" Foreground="Gray"/>
                            <TextBlock Grid.Column="1" Text="TYPE" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="2" Text="VALUE" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="3" Text="MIN" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="4" Text="MAX" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="5" Text="DURATION" FontWeight="Bold" Foreground="Gray" HorizontalAlignment="Center"/>
                        </Grid>

                        <Grid Grid.Row="3" MinHeight="200">
                            <ProgressRing IsActive="{x:Bind ViewModel.IsLoadingPromos, Mode=OneWay}"
                                          Visibility="{x:Bind ViewModel.IsLoadingPromos, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>

                            <ListView ItemsSource="{x:Bind ViewModel.Promos, Mode=OneWay}"
                                      SelectionMode="None"
                                      Padding="0"
                                      Visibility="{x:Bind ViewModel.IsLoadingPromos, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverterInvert}}">
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListView.ItemContainerStyle>

                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="viewModels:PromoVm">
                                        <Grid Padding="24,14"
                                              BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                                              BorderThickness="0,0,0,1">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="1.5*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="1.6*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Grid.Column="0" Text="{x:Bind Code}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                            <TextBlock Grid.Column="1" Text="{x:Bind DiscountType}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="12"/>
                                            <TextBlock Grid.Column="2" Text="{x:Bind ValueDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" FontWeight="SemiBold"/>
                                            <TextBlock Grid.Column="3" Text="{x:Bind MinOrderValueDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="12" Foreground="Gray"/>
                                            <TextBlock Grid.Column="4" Text="{x:Bind MaxDiscountDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="12" Foreground="Gray"/>
                                            <TextBlock Grid.Column="5" Text="{x:Bind DateRangeDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="11" Foreground="Gray"/>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>

                        <!-- Pagination -->
                        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12" Padding="24">
                            <Button Content="◀" Command="{x:Bind ViewModel.PromoPrevCommand}" IsEnabled="{x:Bind ViewModel.PromoCanPrev, Mode=OneWay}"/>
                            <TextBlock VerticalAlignment="Center">
                                <Run Text="Page "/>
                                <Run Text="{x:Bind ViewModel.PromoPageText, Mode=OneWay}" FontWeight="Bold"/>
                            </TextBlock>
                            <Button Content="▶" Command="{x:Bind ViewModel.PromoNextCommand}" IsEnabled="{x:Bind ViewModel.PromoCanNext, Mode=OneWay}"/>
                        </StackPanel>
                    </Grid>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- ===================== ADD PROMO DIALOG ===================== -->
        <ContentDialog
            x:Name="AddPromoDialog"
            Title="Add Promo Code"
            PrimaryButtonText="Create"
            SecondaryButtonText="Cancel"
            DefaultButton="Primary"
            PrimaryButtonClick="{x:Bind ViewModel.OnAddPromoPrimaryClick}">

            <StackPanel Spacing="12" MinWidth="420">

                <InfoBar x:Name="AddPromoInfoBar"
                         IsOpen="{x:Bind ViewModel.IsAddPromoErrorOpen, Mode=OneWay}"
                         IsClosable="True"
                         Severity="Error"
                         Message="{x:Bind ViewModel.AddPromoErrorMessage, Mode=OneWay}"/>

                <TextBox x:Name="PromoCodeTextBox"
                         Header="Code"
                         PlaceholderText="e.g. SALE25"
                         MaxLength="30"
                         Text="{x:Bind ViewModel.AddPromoCode, Mode=TwoWay}"/>

                <ComboBox x:Name="PromoTypeComboBox"
                          Header="Discount Type"
                          SelectedValuePath="Content"
                          SelectedValue="{x:Bind ViewModel.AddPromoDiscountType, Mode=TwoWay}">
                    <ComboBoxItem Content="percentage"/>
                    <ComboBoxItem Content="fixed_amount"/>
                </ComboBox>

                <NumberBox x:Name="PromoValueNumberBox"
                           Header="Value"
                           SpinButtonPlacementMode="Hidden"
                           Minimum="0"
                           PlaceholderText="percentage: 1-100 | fixed_amount: >= 0"
                           Value="{x:Bind ViewModel.AddPromoValue, Mode=TwoWay}"/>

                <NumberBox x:Name="PromoMinOrderNumberBox"
                           Header="Min Order Value"
                           SpinButtonPlacementMode="Hidden"
                           Minimum="0"
                           PlaceholderText="e.g. 200000"
                           Value="{x:Bind ViewModel.AddPromoMinOrderValue, Mode=TwoWay}"/>

                <NumberBox x:Name="PromoMaxDiscountNumberBox"
                           Header="Max Discount (optional)"
                           SpinButtonPlacementMode="Hidden"
                           Minimum="0"
                           PlaceholderText="e.g. 50000"
                           Value="{x:Bind ViewModel.AddPromoMaxDiscount, Mode=TwoWay}"/>

                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <DatePicker x:Name="PromoStartDatePicker"
                                Grid.Column="0"
                                Header="Start Date"
                                Date="{x:Bind ViewModel.AddPromoStartDate, Mode=TwoWay}"/>

                    <DatePicker x:Name="PromoEndDatePicker"
                                Grid.Column="1"
                                Header="End Date"
                                Date="{x:Bind ViewModel.AddPromoEndDate, Mode=TwoWay}"/>
                </Grid>

            </StackPanel>
        </ContentDialog>

    </Grid>
</Page>
